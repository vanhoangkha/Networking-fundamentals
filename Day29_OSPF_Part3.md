# 28. OSPF : PART 3 (IGP: LINK STATE) LOOPBACK INTERFACES - A LOOPBACK Giao di·ªán l√† m·ªôt virtual Giao di·ªán trong the Router - It l√† ALWAYS UP/UP - unless you manually shut it down - It l√† NOT dependent tr√™n m·ªôt PHYSICAL Giao di·ªán - So, it provides m·ªôt consistent ƒê·ªãa ch·ªâ IP that c√≥ th·ªÉ be used ƒë·∫øn REACH / IDENTIFY the Router ![image](https://github.com/psaumur/CCNA/assets/106411237/697e7d43-b428-4fe3-a270-5fc1c9ad13d0) --- OSPF M·∫°ng TYPES - The OSPF ‚ÄúM·∫°ng TYPE‚Äù refers ƒë·∫øn the TYPES c·ªßa connection between OSPF neighbors (Ethernet, etc.) - There l√† THREE MAIN OSPF M·∫°ng TYPES: - Broadcast : - Enabled b·ªüi Default on **Ethernet** and **FDDI** (Fiber Distributed Data Interfaces) INTERFACES - POINT ƒë·∫øn POINT : - Enabled b·ªüi Default on **PPP** (Point-to-Point) and **HDLC** (High-Level Data Link Ki·ªÉm so√°t) INTERFACES - NON-Broadcast : - Enabled b·ªüi Default on **Khung RELAY** and **X.25** INTERFACES <aside> üí° CCNA focuses tr√™n Broadcast v√† POINT-TO-POINT types </aside> --- OSPF Broadcast M·∫°ng TYPE ![image](https://github.com/psaumur/CCNA/assets/106411237/8f99053d-3501-4d1d-86a2-f859c62c160d) - Enabled tr√™n Ethernet v√† FDDI interfaces b·ªüi Default - ROUTERS *dynamically discover* neighbors b·ªüi SENDING / LISTENING cho OSPF ‚ÄúHello‚Äù messages using the Multicast ƒê·ªãa ch·ªâ 224.0.0.5 - A **DR (DESIGNATED Router)** and **BDR (BACKUP DESIGNATION Router)** must be elected tr√™n each M·∫°ng con (only DR if there l√† no OSPF neighbors, ie: R1‚Äôs G1/0 Giao di·ªán) - ROUTERS which aren‚Äôt the DR ho·∫∑c BDR become a **DROther** ![image](https://github.com/psaumur/CCNA/assets/106411237/1ba5b6e1-dd4a-4277-8f33-f806e21302bc) The DR / BDR election order c·ªßa priority: 1) Highest OSPF Giao di·ªán PRIORITY 2) Highest OSPF Router ID ‚ÄúFirst Place‚Äù becomes the DR cho the M·∫°ng con ‚ÄúSecond Place‚Äù because the BDR <aside> üí° Default OSPF Giao di·ªán PRIORITY is ‚Äú1‚Äù on ALL INTERFACES! </aside> The L·ªánh ƒë·∫øn change the OSPF PRIORITY c·ªßa m·ªôt Giao di·ªán is : <aside> üí° R2(config-if)# ip OSPF priority <priority number> </aside> ![image](https://github.com/psaumur/CCNA/assets/106411237/cd98b06f-3730-4b2d-8dfe-a6387fdb66a1) <aside> üí° IF m·ªôt OSPF PRIORITY l√† set to ‚Äú0‚Äù, the Router CANNOT be the DR / BDR cho the M·∫°ng con! </aside> The DR / DBR ELECTION is ‚Äúnon-preemptive‚Äù. Once the DR / DBR l√† selected, they s·∫Ω keep their role until OSPF is: - Reset - Giao di·ªán fails - Is shut down - etc. ![image](https://github.com/psaumur/CCNA/assets/106411237/e59e6217-0404-476d-9bcf-49e82c380b84) ![image](https://github.com/psaumur/CCNA/assets/106411237/82eb1f11-4aed-456b-b2b1-1679cae06743) <aside> üí° In the Broadcast M·∫°ng TYPE, ROUTERS s·∫Ω only form m·ªôt FULL OSPF ADJACENCY v·ªõi the DR v√† the BDR c·ªßa the ƒêo·∫°n! </aside> Therefore, ROUTERS only exchange LSAs v·ªõi the DR v√† BDR. DROthers s·∫Ω NOT exchange LSAs v·ªõi each other. ALL ROUTERS s·∫Ω still have the same LSDB but THIS reduces the amount c·ªßa LSAs flooding the M·∫°ng <aside> üí° MESSAGES ƒë·∫øn the DR / BDR l√† Multicast ƒë·∫øn 224.0.0.6 </aside> The DR v√† BDR s·∫Ω form m·ªôt FULL ADJACENCY v·ªõi ALL ROUTERS trong the M·∫°ng con DROthers s·∫Ω form m·ªôt FULL ADJACENCY ONLY v·ªõi the DR / BDR ! ![image](https://github.com/psaumur/CCNA/assets/106411237/61e1c230-3926-40ae-917a-55fcf76caf64) --- OSPF POINT-TO-POINT M·∫°ng TYPE ![image](https://github.com/psaumur/CCNA/assets/106411237/51d7d486-a810-4a69-8be2-804f667fca03) - ENABLED on **SERIAL** INTERFACES using the **PPP** and **HDLC** encapsulations, by Default - ROUTERS dynamically discover neighbors b·ªüi SENDING / LISTENING cho OSPF ‚ÄúHello‚Äù messages using the Multicast ƒê·ªãa ch·ªâ 224.0.0.5 - A DR v√† BDR l√† NOT elected - These ENCAPSULATIONS l√† used for ‚ÄúPoint-To-Point‚Äù connections - Therefore, there l√† no point trong electing a DR v√† DBR - The TWO ROUTERS s·∫Ω form m·ªôt FULL ADJACENCY v·ªõi each other --- (ASIDE) SERIAL INTERFACES ![image](https://github.com/psaumur/CCNA/assets/106411237/02f6f3a8-dcbb-46cd-bb2e-47ceb84d10cc) - One side c·ªßa SERIAL CONNECTION functions as DCE (Data Communications Equipment) - The OTHER side functions as DTE (Data Terminal Equipment) - ONLY the DCE side needs ƒë·∫øn specify the *clock rate* (speed) of the connection Ethernet INTERFACES use the ‚Äúspeed‚Äù L·ªánh ƒë·∫øn configure the operating speed. SERIAL INTERFACES use the ‚Äúclock rate‚Äù L·ªánh ![image](https://github.com/psaumur/CCNA/assets/106411237/c32af4a3-105c-451a-9641-0f7fc26e7f42) If you change the ƒê√≥ng g√≥i, it ph·∫£i MATCH tr√™n BOTH ENDS ho·∫∑c the Giao di·ªán s·∫Ω go down. ![image](https://github.com/psaumur/CCNA/assets/106411237/8a448ef2-96f2-4371-bef1-520572ba5224) R1 v√† R2 sharing the SAME ƒê√≥ng g√≥i Type ![image](https://github.com/psaumur/CCNA/assets/106411237/6f934097-30fb-4605-935d-08a29e53a476) SERIAL INTERFACES SUMMARY - The Default ƒê√≥ng g√≥i l√† HDLC - You c√≥ th·ªÉ configure PPP ƒê√≥ng g√≥i v·ªõi this L·ªánh: <aside> üí° R1(config-if)# **ƒê√≥ng g√≥i ppp** </aside> - One side l√† DCE, other side l√† DTE - Identify which side l√† DCE / DTE : <aside> üí° R1# **show controllers** *Giao di·ªán-id* </aside> - You ph·∫£i configure the CLOCK RATE tr√™n the DCE side: <aside> üí° R1(config-if)# clock rate *bits-per-second* </aside> --- ![image](https://github.com/psaumur/CCNA/assets/106411237/bc5a756e-c65d-4585-ad3f-c0e29682c0eb) ![image](https://github.com/psaumur/CCNA/assets/106411237/232c8658-d129-49f4-9a37-76139ebe857e) - You c√≥ th·ªÉ configure the OSPF M·∫°ng TYPE tr√™n m·ªôt Giao di·ªán with : <aside> üí° R1(config-if)# ip OSPF M·∫°ng <M·∫°ng type> </aside> V√≠ d·ª•, if TWO ROUTES l√† directly connected v·ªõi m·ªôt Ethernet link, there l√† no need cho m·ªôt DR / DBR. You c√≥ th·ªÉ configure the POINT-TO-POINT M·∫°ng type trong this case NOTE: Not all M·∫°ng TYPES work tr√™n ALL LINK TYPES (V√≠ d·ª•, a serial link cannot use the Broadcast M·∫°ng type) ![image](https://github.com/psaumur/CCNA/assets/106411237/8688e7ef-d166-4433-9f65-b918917f385f) <aside> üí° NON-Broadcast M·∫°ng type Default Timers : Hello 30, Dead 120 </aside> --- OSPF NEIGHBOUR / ADJACENCY REQUIREMENTS 1) AREA NUMBER ph·∫£i MATCH 2) INTERFACES ph·∫£i be trong the SAME M·∫°ng con 3) OSPF PROCESS ph·∫£i not be **SHUTDOWN** ![image](https://github.com/psaumur/CCNA/assets/106411237/80b626ac-f368-4d86-85f4-dc80e3be5259) 4) OSPF Router ID ph·∫£i be unique ![image](https://github.com/psaumur/CCNA/assets/106411237/8f089c68-96e9-4cbf-a9c0-c93f74de4888) 5) HELLO v√† DEAD Timers ph·∫£i MATCH 6) X√°c th·ª±c settings ph·∫£i MATCH ![image](https://github.com/psaumur/CCNA/assets/106411237/06cab926-a458-4978-b754-b2253ee74762) *** SPECIAL REQUIREMENTS *** 7) IP MTU settings ph·∫£i MATCH - IP MTU : Maximum size c·ªßa m·ªôt IP G√≥i tin that c√≥ th·ªÉ be sent t·ª´ m·ªôt Giao di·ªán - If the settings DO NOT match, can still become OSPF Neighbors but OSPF s·∫Ω NOT operated properly 8) OSPF M·∫°ng TYPE ph·∫£i match - will appear ƒë·∫øn be working but NEIGHBOR won‚Äôt appear trong ƒê·ªãnh tuy·∫øn information --- OSPF LSA TYPES - The OSPF LSDB l√† made up c·ªßa LSAs - There l√† 11 types c·ªßa LSA but there l√† only 3 you n√™n be aware c·ªßa cho the CCNA: - Type 1 (Router LSA) - Type 2 (M·∫°ng LSA) - Type 5 (AS External LSA) TYPE 1 (Router LSA) - Every OSPF Router generates this type c·ªßa LSA - It identifies the Router using it‚Äôs Router ID - It also lists NETWORKS attached ƒë·∫øn the Router‚Äôs OSPF-Activated INTERFACES TYPE 2 (M·∫°ng LSA) - Generated b·ªüi the DR c·ªßa EACH ‚Äúmulti-Truy c·∫≠p‚Äù M·∫°ng (ie: the Broadcast M·∫°ng type) - Lists the ROUTERS which l√† attached ƒë·∫øn the multi-Truy c·∫≠p M·∫°ng TYPE 5 (AS-External LSA) - Generated b·ªüi ASBRs ƒë·∫øn describe ROUTES ƒë·∫øn DESTINATIONS outside c·ªßa the AS (OSPF Domain) 