# 36. CDP v√† LLDP (LAYER 2 DISCOVERY GIAO TH·ª®C) INTRO ƒë·∫øn LAYER 2 DISCOVERY PROTOCOLS - LAYER 2 DISCOVERY Giao th·ª©c, such as CDP v√† LLDP share information v·ªõi v√† DISCOVER information about NEIGHBORING (Connected) DEVICES - The SHARED INFORMATION includes: - Hostname - ƒê·ªãa ch·ªâ IP - Thi·∫øt b·ªã Type - etcetera. - **CDP** is m·ªôt Cisco Proprietary Giao th·ª©c - **LLDP** is m·ªôt Industry Standard Giao th·ª©c (IEEE 802.1AB) - Because they SHARE INFORMATION about the DEVICES trong the M·∫°ng, they c√≥ th·ªÉ be considered m·ªôt B·∫£o m·∫≠t risk v√† l√† often NOT used. It l√† up ƒë·∫øn the M·∫°ng ENGINEER / ADMIN ƒë·∫øn decide if they want ƒë·∫øn use them trong the M·∫°ng ho·∫∑c not. ![image](https://github.com/psaumur/CCNA/assets/106411237/65f39e9f-ae1a-42c6-8afb-5e79f939fe5d) --- CISCO DISCOVERY Giao th·ª©c (CDP) - CDP l√† m·ªôt Cisco proprietary Giao th·ª©c - It l√† enabled tr√™n Cisco devices (routers, switches, firewalls, IP Phones, etc) by Default <aside> üí° CDP Messages l√† periodically sent ƒë·∫øn Multicast ƒê·ªãa ch·ªâ MAC `0100.0CCC.CCCC` </aside> - When m·ªôt Thi·∫øt b·ªã receives m·ªôt CDP message, it PROCESSES v√† DISCARDS the message. It does NOT forward it ƒë·∫øn other devices. - By Default, CDP Messages l√† sent once every **60 seconds** - By Default, the CDP hold-time is **180 seconds.** If m·ªôt message isn‚Äôt received t·ª´ m·ªôt neighbor cho 180 seconds, the neighbor l√† REMOVED t·ª´ the CDP Neighbor Table - CDPv2 messages l√† sent b·ªüi Default ![image](https://github.com/psaumur/CCNA/assets/106411237/8a0552be-dbc7-4c7b-b011-e32dff75a57e) ![image](https://github.com/psaumur/CCNA/assets/106411237/26e180ec-da08-44d2-bb55-325fdc0c234f) --- CDP NEIGHBOR TABLES ![image](https://github.com/psaumur/CCNA/assets/106411237/00cd814e-0255-4fac-ac71-3e50054f813c) ‚ÄúThi·∫øt b·ªã ID‚Äù = What devices were DISCOVERED b·ªüi CDP ‚ÄúLocal Intrface‚Äù = What LOCAL Thi·∫øt b·ªã Giao di·ªán the neighbors l√† connected to ‚ÄúHoldtime‚Äù = Hold-time countdown trong seconds (0 = Thi·∫øt b·ªã removed t·ª´ table) ‚ÄúCapabilities‚Äù = Refers ƒë·∫øn Capability Codes table (located above output) ‚ÄúPlatform‚Äù = Displays the MODEL c·ªßa the Neighbor Thi·∫øt b·ªã ‚ÄúC·ªïng ID‚Äù = Neighbor ports that LOCAL Thi·∫øt b·ªã l√† connected to --- MORE DETAILED OUTPUT ![image](https://github.com/psaumur/CCNA/assets/106411237/cd4fbedb-c12f-4e1e-8582-8db16985121f) ‚ÄúVersion‚Äù = shows what version c·ªßa Cisco‚Äôs IOS l√† running tr√™n the Thi·∫øt b·ªã --- SHOW SPECIFIC CDP NEIGHBOR ENTRY ![image](https://github.com/psaumur/CCNA/assets/106411237/83ef9488-e82c-4453-ae6e-02575039d0f9) --- CDP C·∫•u h√¨nh COMMANDS ![image](https://github.com/psaumur/CCNA/assets/106411237/393b2680-2304-4c8e-9180-88cc5fefbfd8) - CDP l√† GLOBALLY ENABLED, by Default - CDP l√† also ENABLED tr√™n each Giao di·ªán, by Default - To K√≠ch ho·∫°t / V√¥ hi·ªáu h√≥a CDP globally: `R1(config)# [no] cdp run` - To K√≠ch ho·∫°t / V√¥ hi·ªáu h√≥a CDP tr√™n specific interfaces : `R1(config-if)# [no] cdp enable` - Configure the CDP timer: `R1(config)# cdp time *seconds*` - Configure the CDP holdtime: `R1(config)# cdp holdtime *seconds*` - K√≠ch ho·∫°t / V√¥ hi·ªáu h√≥a CDPv2: `R1(config)# [no] cdp advertise-v2` --- LINK LAYER DISCOVERY Giao th·ª©c (LLDP) - LLDP l√† m·ªôt INDUSTRY STANDARD Giao th·ª©c (IEEE 802.1AB) - It l√† usually DISABLED tr√™n Cisco devices, by Default, so it ph·∫£i be manually ENABLED - A Thi·∫øt b·ªã c√≥ th·ªÉ run CDP v√† LLDP t·∫°i the same time <aside> üí° LLDP Messages l√† periodically sent ƒë·∫øn Multicast ƒê·ªãa ch·ªâ MAC `0180.c200.000E` </aside> - When m·ªôt Thi·∫øt b·ªã receives m·ªôt LLDP message, it PROCESSES v√† DISCARDS the message. It does NOT forward it ƒë·∫øn OTHER DEVICES - By Default, LLDP Messages l√† sent once every **30 seconds** - By Default, LLDP Holdtime is **120 seconds** - LLDP has m·ªôt additional timer called the ‚Äòreinitialization delay‚Äô - If LLDP l√† ENABLED (Globally ho·∫∑c tr√™n m·ªôt Giao di·ªán), this TIMER s·∫Ω DELAY the actual initialization c·ªßa LLDP (**2 seconds,** by Default) --- LLDP C·∫•u h√¨nh COMMANDS - LLDP l√† usually GLOBALLY DISABLED b·ªüi Default - LLDP l√† also DISABLED tr√™n each Giao di·ªán, by Default - To K√≠ch ho·∫°t LLDP GLOBALLY : `R1(config)# lldp run` - To K√≠ch ho·∫°t LLDP tr√™n specific INTERFACES (tx): `R1(config-if)# lldp transmit` - To K√≠ch ho·∫°t LLDP tr√™n specific INTERFACES (rx): `R1(config-if)# lldp receive` YOU NEED ƒë·∫øn K√≠ch ho·∫°t BOTH ƒë·∫øn SEND v√† RECEIVE (Unless you want ƒë·∫øn only K√≠ch ho·∫°t SEND ho·∫∑c RECEIVE LLDP Messages) - Configure the LLDP timer: `R1(config)# lldp timer *seconds*` - Configure the LLDP holdtime: `R1(config)# lldp holdtime *seconds*` - Configure the LLDP reinit timer: `R1(config)# lldp reinit *seconds*` ![image](https://github.com/psaumur/CCNA/assets/106411237/25afc5ad-4d82-4472-b282-31ed2a65eae7) ![image](https://github.com/psaumur/CCNA/assets/106411237/78fab926-9fda-4c83-91eb-eda4bf4ec005) SHOW LLDP STATUS ![image](https://github.com/psaumur/CCNA/assets/106411237/32b11d7b-4050-422e-afd4-bec23e8db3a1) SHOW ALL LLDP NEIGHBORS ![image](https://github.com/psaumur/CCNA/assets/106411237/85a46d24-5574-4400-bc03-6b0568294940) SHOW LLDP NEIGHBORS trong DETAIL ![image](https://github.com/psaumur/CCNA/assets/106411237/26751ca8-ed54-4e5c-9927-8c6eb0e2e3f7) SHOW SPECIFIC LLDP Thi·∫øt b·ªã ENTRY ![image](https://github.com/psaumur/CCNA/assets/106411237/b5332838-d112-4556-bee0-c3716a3d4f89) ![image](https://github.com/psaumur/CCNA/assets/106411237/2dd16e33-75a9-4e11-91aa-b507ed490e9b) 