# 10. Header IPV4 Internet Giao thức version 4 Header hoặc IPv4 Header Header là used tại LAYER 3 đến help send data between devices trên separate networks, even trên other sides của the world over the Internet. This là known as Định tuyến. Header IPV4 là used đến ENCAPSULATE một TCP hoặc UDP Đoạn. To Review: ![image](https://github.com/psaumur/CCNA/assets/106411237/64906e3c-0bae-4c2c-96ca-4e6850f3844a) --- FIELDS của Header IPV4 ![image](https://github.com/psaumur/CCNA/assets/106411237/f2667488-2769-4e62-bee7-eddbf9e00058) | FIELD | # OF BITS | | --- | --- | | VERSION | 4 | | IHL | 4 | | DSCP | 6 | | ECN | 2 | | TOTAL LENGTH | 16 | | IDENTIFICATION | 16 | | FLAGS | 3 | | FRAGMENT OFFSET | 13 | | TIME đến LIVE | 8 | | Giao thức | 8 | | Header CHECKSUM | 16 | | SOURCE Địa chỉ | 32 | | DESTINATION Địa chỉ | 32 | | OPTIONS | 320 Max | --- VERSION: - LENGTH là 4 bits. - IDs version của IP used (IPv4 hoặc IPv6) - IPv4 = 0100 trong Binary (Decimal 4) - IPv6 = 0110 trong Binary (Decimal 6) --- Internet Header LENGTH (IHL): - LENGTH là 4 bits. - Final field của IPv4 Header (Options) is variable trong length so this field là necessary đến indicate the total length của the Header. - IDs the length của the Header trong 4-BYTE INCREMENTS. - The MINIMUM value là 5 (5 * 4-bytes = 20 bytes) - Empty OPTIONS Field - The MAXIMUM value là 15 (15 * 4-bytes = 60 bytes) MINIMUM IPv4 Header LENGTH = 20 Bytes! MAXIMUM IPv4 Header LENGTH = 60 Bytes! --- DSCP (Differentiated Services Code Point): - LENGTH là 6 bits. - Used cho QoS (Chất lượng dịch vụ) - Used đến prioritize delay-sensitive data (streaming voice, video, etc.) --- ECN (Explicit Congestion Notification): - LENGTH là 2 bits. - Provides end-to-end (between two endpoints) notification của Mạng congestion WITHOUT dropping packets. - Optional feature that requires both endpoints, as well as the underlying Mạng Hạ tầng đến support it. --- TOTAL LENGTH: - LENGTH là 16 bits. - Indicates the TOTAL length của the Gói tin (L3 Header + L4 Đoạn) - Measured trong bytes (not 4-byte increments like IHL) - Minimum value của 20 Bytes (IPv4 Header với NO encapsulated data) - Maximum value của 65,535 (MAXIMUM 16-bit value) = 2^16 --- IDENTIFICATION: - LENGTH là 16 bits. - If một Gói tin là fragmented due đến being too large, this field là used đến identify which Gói tin the fragment belongs to. - All fragments của the same Gói tin sẽ have their own IPv4 Header với the same value trong this field. - Packets là fragmented, if larger than the MTU (Maximum Transmission Unit) - The MTU là usually 1500 bytes (Max size của một Ethernet Khung) - Fragments là reassembled bởi the receiving host. --- FLAGS: - LENGTH là 3 bits - Used đến Kiểm soát/identify fragments. - Bit 0: Reserved, always set đến 0. - Bit 1: Don't Fragment (DF bit), used đến indicate một Gói tin that nên not be fragmented. - Bit 2: More Fragments (MF bit), set đến 1 if there là more fragments trong the Gói tin, set đến 0 cho the last fragment hoặc NO fragments. --- FRAGMENT OFFSET: - LENGTH là 13 bits - Used đến indicated the position của the fragment within the original, unfragmented IP Gói tin. - Allows fragmented packets đến be reassembled even if the fragments arrive out của order. --- TIME đến LIVE (TTL): - LENGTH là 8 bits - A Router sẽ drop một Gói tin với một TTL của 0 - Used đến prevent infinite loops - Originally designed đến indicated một packets maximum lifetime trong seconds. - In practice, indicates a 'hop count': each time the Gói tin arrives tại một Router, the Router decreases the TTL bởi 1. - Recommended Default TTL là 64. --- Giao thức: - LENGTH là 8 bits - Indicates the Giao thức của the encapsulated Layer 4 PDU - Value của 1 : ICMP - Value của 6 : TCP - Value của 17 : UDP - Value của 89 : OSPF (Dynamic Định tuyến Giao thức) - List của Giao thức numbers trên Wikipedia : List của IP Giao thức Numbers Header CHECKSUM: - LENGTH là 16 bits - A calculated checksum used đến check cho errors trong Header IPV4. - When một Router receives một Gói tin, it calculates the checksum của the Header và compares it đến the one trong this field của một Header. - If they do not match, the Router drops the Gói tin. - Used đến check cho ERRORS only trong Header IPV4. - IP relies trên the encapsulated Giao thức đến detect errors trong the encapsulated data. - Both TCP và UDP have their own checksum fields đến detect errors trong the encapsulated data. --- SOURCE và DESTINATION: - LENGTH là 32 bits each - SOURCE IP = IPv4 Địa chỉ của the Sender của the Gói tin. - DESTINATION IP = IPv4 Địa chỉ của the intended Receiver của the Gói tin. --- OPTIONS: - LENGTH là 0-320 bits - Optional / Rarely Used - If the IHL field là greater than 5, it means that Options là present. 