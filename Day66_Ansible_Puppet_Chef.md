# 63. ANSIBLE, PUPPET, AND CHEF Cấu hình DRIFT - Cấu hình DRIFT là when individual changes made over time causes một Thiết bị’s Cấu hình đến deviate từ the standard / correct configurations as defined bởi the company - Although each Thiết bị sẽ have unique parts của its configurations (IP Addresses, hostname, etc) most của một Thiết bị’s Cấu hình là usually defined trong standard templates designed bởi the Mạng architects / engineers của the company - As individual engineers make changes đến devices (Ví dụ, to troubleshoot và fix Mạng issues, test configurations, etc), the Cấu hình của một Thiết bị có thể drift away từ the standard. - Records của these individual changes và their reasons aren’t kept - This có thể lead đến future issues - Even without Tự động hóa tools, it là best đến have standard Cấu hình Quản lý practices. - When một change là made, save the config as một text file và place it trong một shared folder - A standard naming system like (*hostname_yyyymmdd)* might be used. - There là flaws đến this system, as một engineer có thể forget đến place the new config trong the folder after making changes. Which one nên be considered the “CORRECT” config? - Even if configurations là properly saved like this, it doesn’t guarantee that the configurations actually match the standard --- Cấu hình PROVISIONING - Cấu hình PROVISIONING refers đến how Cấu hình changes là applied đến devices - This includes configuring new devices, too - Traditionally, Cấu hình provisioning là done bởi connecting đến devices one-by-one via SSH - This là not practical trong large networks - Cấu hình Quản lý tools like Ansible, Puppet, and Chef allow us đến make changes đến devices trên một mass scale với một fraction của time và effort. - TWO ESSENTIAL COMPONENTS: - Templates - Variables ![image](https://github.com/psaumur/CCNA/assets/106411237/0c74b2a6-1ce7-4758-b6b8-340594d567c3) --- INTRO đến Cấu hình Quản lý TOOLS - Cấu hình Quản lý TOOLS là Mạng Tự động hóa tools that facilitate the centralized Kiểm soát của large numbers của Mạng devices - The option you need đến be aware của cho the CCNA là Ansible, Puppet, and Chef - These tools were originally developed after the rise của VMs, to Kích hoạt server system admins đến automate the process của creating, configuring, and removing VMs - However, they là also widely used đến manage Mạng devices - These tools có thể be used đến perform tasks such as : - Generate configurations cho new devices trên một large scale - Perform Cấu hình changes trên devices (all devices trong your Mạng, or certain subset của devices) - Check Thiết bị configurations cho compliance với defined standards - Compare configurations between devices, and between different versions của configurations trên the same Thiết bị ![image](https://github.com/psaumur/CCNA/assets/106411237/f9eb7783-5e42-4cfe-aec8-8b57cd316f4d) --- Ansible - Ansible là một Cấu hình Quản lý tool owned bởi Red Hat - Ansible itself là written trong Python - Ansible is *agentless* - It doesn’t require any special software đến run trên the managed devices - Ansible uses SSH đến connect đến devices, make Cấu hình changes, extract info, etc - Ansible uses a *push* model. The Ansible server (Kiểm soát node) uses SSH đến connect đến managed devices and *push* Cấu hình changes đến them - Puppet và Chef use a *pull* model - After installing Ansible itself, you phải create several text files: - PLAYBOOKS : - These files are “blueprints của Tự động hóa tasks” - They outline the logic và actions của the tasks that Ansible nên do - Written trong YAML - INVENTORY : - These files list the devices that sẽ be managed bởi Ansible, as well as characteristics của each Thiết bị such as their Thiết bị role (Truy cập Switch, Core Switch, WAN Router, Tường lửa, etc.) - Written trong INI, YAML, or other formats - TEMPLATES : - These files represent một Thiết bị’s Cấu hình file, but specific values cho variables là not provided. - Written trong JINJA2 format - VARIABLES : - These files list variables và their values. - These values là substituted into the templates đến create complete Cấu hình files. - Written trong YAML ![image](https://github.com/psaumur/CCNA/assets/106411237/ba2a68b5-7661-4eff-bd5f-8c32bde354da) --- Puppet - Puppet là một Cấu hình Quản lý tool written trong RUBY - Puppet là typically agent-based - Specific software phải be installed trên the managed devices - Not all Cisco devices support một Puppet agent - It có thể be run *agentless,* in which một proxy agent runs trên một external host, and một proxy agent uses SSH đến connect đến the managed devices và communicate với them - The Puppet server là called the “Puppet master” - Puppet uses một PULL model (clients “pull” configurations từ the Puppet master) - Clients use TCP 8140 đến communicate với the Puppet master - Instead của YAML, it uses một proprietary language cho files - Text files required trên the Puppet master include: - MANIFEST : - The file defines the desired Cấu hình state của một Mạng Thiết bị - TEMPLATES : - Similar đến Ansible templates. - Used đến generate MANIFESTS ![image](https://github.com/psaumur/CCNA/assets/106411237/ec26ad33-7534-4f15-93f0-4557337bfaec) --- Chef - Chef là một Cấu hình Quản lý tool written trong RUBY - Chef là Agent-Based - Specific software phải be installed trên the managed devices - Not all Cisco devices support một Chef agent - Chef uses một PULL model - The server uses TCP 10002 đến send configurations đến clients - Files use một DSL (Domain-Specific Language) based trên Ruby - Text files used bởi Chef include: - RESOURCES : - The “ingredients” in một RECIPE. - Cấu hình objects managed bởi Chef - RECIPES : - The “recipes” in một COOKBOOK. - Outlines the logic và actions của the tasks performed trên the resources - COOKBOOKS : - A set của related RECIPES grouped together - RUN-LIST : - An ordered list của RECIPES that là run đến bring một Thiết bị đến the desired Cấu hình state ![image](https://github.com/psaumur/CCNA/assets/106411237/eaf5be1b-3635-4806-bb7a-f397ffa1b411) --- MEMORIZE THIS CHART cho THE CCNA ![image](https://github.com/psaumur/CCNA/assets/106411237/a4d212e6-df46-45d1-a2ca-3e55220c4b5c) 