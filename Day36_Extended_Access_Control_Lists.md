# 35. EXTENDED Truy c·∫≠p Ki·ªÉm so√°t LISTS (EACL) ANOTHER WAY ƒë·∫øn CONFIGURE NUMBERED ACLs - In DAY 34, you learned that numbered ACLs l√† configured trong Global Config mode: ![image](https://github.com/psaumur/CCNA/assets/106411237/d5bbb9d7-5499-43e0-9ac8-b173e5bb5c50) - You learned that named ACLs l√† configured v·ªõi subcommands trong m·ªôt separate config mode: ![image](https://github.com/psaumur/CCNA/assets/106411237/73104e31-0630-4b2a-a328-29adc5ceb418) - However, in modern IOS you c√≥ th·ªÉ also configure numbered ACLs trong the exact same way as named ACLs: ![image](https://github.com/psaumur/CCNA/assets/106411237/724638f3-1044-4476-96de-cda39fb51315) ![image](https://github.com/psaumur/CCNA/assets/106411237/a72df84e-262b-467c-a87e-b70699033076) --- ADVANTAGES c·ªßa NAMED ACL CONFIG MODE - You c√≥ th·ªÉ easily DELETE individual entries trong the ACL v·ªõi NO *entry-number* - You c√≥ th·ªÉ easily DELETE individual entries trong the ACL v·ªõi NO *sequence-number* ![image](https://github.com/psaumur/CCNA/assets/106411237/f7f85684-6300-495d-bde9-1e1ffcead85e) This doesn‚Äôt work v·ªõi NUMBERED Truy c·∫≠p lists ![image](https://github.com/psaumur/CCNA/assets/106411237/8e27f6f1-794b-45be-ac67-20b3f563f551) - You c√≥ th·ªÉ insert NEW entries in-between other entries b·ªüi specifying the SEQUENCE NUMBER ![image](https://github.com/psaumur/CCNA/assets/106411237/41fb1df8-b368-4349-b33a-ba0f8c768435) --- RESEQUENCING ACLs - There l√† a *resequencing* function that helps edit ACLs - The L·ªánh is `R1(config)#ip access-list resequence *acl-id starting-seq-num increment*` ![image](https://github.com/psaumur/CCNA/assets/106411237/1c5e3f13-900a-4be4-99ba-db86b0128f57) --- EXTENDED NUMBERS v√† NAMED ACLs - EXTENDED ACLs function mostly the same as STANDARD ACLs - They c√≥ th·ªÉ be NUMBERED ho·∫∑c NAMED, just like STANDARD ACLs - NUMBERED ACLs use the following ranges: **100 - 199, 2000 - 2699** - Processed t·ª´ TOP ƒë·∫øn BOTTOM, just like STANDARD ACLs - However, they c√≥ th·ªÉ match traffic based tr√™n MORE PARAMETERS, so they l√† more PRECISE (and more complex) than STANDARD ACLs - We s·∫Ω focus tr√™n matching based tr√™n these main parameters: - **LAYER 4 Giao th·ª©c / C·ªïng** - **Source ƒê·ªãa ch·ªâ** - D**estination ƒê·ªãa ch·ªâ** --- EXTENDED NUMBERED ACL <aside> üí° `R1(config)# access-list *number* [permit | deny] *protocol src-ip dest-ip*` </aside> EXTENDED NAMED ACL <aside> üí° `R1(config)# ip access-list extended {name | number}` </aside> <aside> üí° `R1(config-ext-nacl)# {seq-num} {permit | deny} *protocol src-ip dest-ip*` </aside> --- MATCHING THE Giao th·ª©c ![image](https://github.com/psaumur/CCNA/assets/106411237/f6337620-5eb1-4ddc-837c-ae242a718f29) IP Giao th·ª©c Number l√† the number used trong Header IPV4 Giao th·ª©c field Examples: (1) ICMP, (6) TCP, (17) UDP, (88) EIGRP, (89) OSPF MATCHING THE SOURCE / DESTINATION ƒê·ªãa ch·ªâ IP ![image](https://github.com/psaumur/CCNA/assets/106411237/bbb38418-3276-485b-ba6b-5c4c7097d56f) This L·ªánh: <aside> üí° `R1(config-ext-nacl)#deny tcp any 10.0.0.0 0.0.0.255` </aside> Deny ALL PACKETS that encapsulate m·ªôt TCP ƒêo·∫°n t·ª´ ANY source ƒë·∫øn DESTINATION 10.0.0.0/24 --- PRACTICE QUESTIONS: 1) ALLOW ALL TRAFFIC `R1(config-ext-nacl)# permit ip any any` (ip l√† used for ‚Äúall protocols‚Äù) 2) PREVENT 10.0.0.0/16 t·ª´ SENDING UDP traffic ƒë·∫øn 192.168.1.1/32 `R1(config-ext-nacl)# deny udp 10.0.0.0 0.0.255.255 host 192.168.1.1` 3) PREVENT 172.16.1.1/32 t·ª´ pinging hosts trong 192.168.0.0/24 `R1(config-ext-nacl)# deny icmp host 172.16.1.1 192.168.0.0 0.0.0.255` MATCHING THE TCP / UDP C·ªïng NUMBERS - When matching TCP / UDP, you c√≥ th·ªÉ optionally specify the SOURCE and/or DESTINATION C·ªïng NUMBERS ƒë·∫øn match ![image](https://github.com/psaumur/CCNA/assets/106411237/c059d148-b685-49b2-81e0-518a6d66c25b) eq = equal than gt = greater than lt = less than neq = not equal to range = range c·ªßa ports You c√≥ th·ªÉ use either the C·ªïng NUMBER ho·∫∑c the specific TYPE (that has m·ªôt KNOWN C·ªïng NUMBER) ![image](https://github.com/psaumur/CCNA/assets/106411237/03dd80be-1f0f-41ac-ae1a-bdb851579bb4) ![image](https://github.com/psaumur/CCNA/assets/106411237/f7a11d7b-aeb6-4528-b5cc-62ff515fe33c) --- PRACTICE QUESTIONS 2: 1) ALLOW TRAFFIC t·ª´ 10.0.0.0/16 ƒë·∫øn Truy c·∫≠p the server t·∫°i 2.2.2.2/32 using HTTPS `R1(config-ext-nacl)# permit tcp 10.0.0.0 0.0.255.255 host 2.2.2.2 eq 443` 2) PREVENT ALL HOSTS using SOURCE UDP C·ªïng Numbers t·ª´ 20000 ƒë·∫øn 30000 t·ª´ accessing the server t·∫°i 3.3.3.3/32 `R1(config-ext-nacl)# deny udp any range 20000 30000 host 3.3.3.3` 3) ALLOW HOSTS trong 172.16.1.0/24 using m·ªôt TCP SOURCE C·ªïng greater than 9999 ƒë·∫øn Truy c·∫≠p ALL TCP ports tr√™n server 4.4.4.4/32 EXCEPT C·ªïng 23 `R1(config-ext-nacl)# permit tcp 172.16.1.0 0.0.0.255 gt 9999 host 4.4.4.4 neq 23` EXAMPLE M·∫°ng ![image](https://github.com/psaumur/CCNA/assets/106411237/ddb40c27-b195-49fe-a12a-49e078166e30) ![image](https://github.com/psaumur/CCNA/assets/106411237/692f4a58-13d3-4c0a-8513-3dc76b014b65) REQUIREMENTS: - Hosts trong 192.168.1.0/24 can‚Äôt use HTTPS ƒë·∫øn Truy c·∫≠p SRV1 - Hosts trong 192.168.2.0/24 can‚Äôt Truy c·∫≠p 10.0.2.0/24 - NONE c·ªßa the hosts trong 192.168.1.0/24 ho·∫∑c 192.168.2.0/24 c√≥ th·ªÉ ping 10.0.1.0/24 ho·∫∑c 10.0.2.0/24 ACL m·ªü r·ªông #1 (Applied t·∫°i R1 G0/1 INBOUND Giao di·ªán) `R1(config)# ip access-list extended HTTP_SRV1` `R1(config-ext-nacl)# deny tcp 192.168.1.0 0.0.0.255 host 10.0.1.100 eq 443` `R1(config-ext-nacl)# permit ip any any` `R1(config-ext-nacl)# int g0/1` `R1(config-if)# ip access-group HTTP_SRV1 in` ACL m·ªü r·ªông #2 (APPLIED t·∫°i R1 G0/2 INBOUND Giao di·ªán) `R1(config)# ip access-list extended BLOCK_10.0.2.0` `R1(config-ext-nacl)# deny ip 192.168.2.0 0.0.0.255 10.0.2.0 0.0.0.255` `R1(config-ext-nacl)# permit ip any any` `R1(config-ext-nacl)# int g0/2` `R1(config-if)# ip access-group BLOCK_10.0.2.0 in` ACL m·ªü r·ªông #3 (APPLIED t·∫°i R1 g0/0 OUTBOUND Giao di·ªán) `R1(config)# ip access-list extended BLOCK_ICMP` `R1(config-ext-nacl)# deny icmp 192.168.1.0 0.0.0.255 10.0.1.0 0.0.0.255` `R1(config-ext-nacl)# deny icmp 192.168.1.0 0.0.0.255 10.0.2.0 0.0.0.255` `R1(config-ext-nacl)# deny icmp 192.168.2.0 0.0.0.255 10.0.1.0 0.0.0.255` `R1(config-ext-nacl)# permit ip any any` `R1(config-ext-nacl)# int g0/0` `R1(config-if)# ip access-group BLOCK_ICMP out` What the EXTENDED ACLs look like ![image](https://github.com/psaumur/CCNA/assets/106411237/cda064f2-b1ce-45ee-a660-04cdceb3514b) C√°ch SEE WHICH ACL m·ªü r·ªông‚Äôs l√† APPLIED ƒë·∫øn m·ªôt Giao di·ªán ![image](https://github.com/psaumur/CCNA/assets/106411237/f596bca6-c06a-445e-84a3-8f8eb0c6baaf) 