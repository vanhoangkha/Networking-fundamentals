# 46. QoS (VOICE VLANS) : PART 1 IP PHONES / VOICE LANS - Traditional phones operate over the *public switched telephone Mạng* (PSTN) - Sometimes, this là called POTS (Plain Old Telephone System) - IP PHONES use VoIP (Voice Over IP) technologies đến Kích hoạt phone calls over một IP Mạng, such as the Internet - IP PHONES là connected đến một Switch, just like any other end HOST IP PHONES - Have một internal 3-Cổng Switch - 1 Cổng là the “UPLINK” to the EXTERNAL Switch - 1 Cổng là the “DOWNLINK” to the PC - 1 Cổng connects internally đến the PHONE itself ![image](https://github.com/psaumur/CCNA/assets/106411237/0bba51c0-af57-49e4-ae29-fca2a1079a34) - This allows the PC và the IP PHONE đến share một single Switch Cổng. Traffic từ the PC passes through the IP PHONE đến the Switch - It là RECOMMENDED đến separate “VOICE” traffic (from IP PHONE) and “DATA TRAFFIC” (from the PC) by placing them into SEPARATE VLANS (!) - This có thể be accomplished using một VLAN thoại - Traffic từ the PC sẽ be UNTAGGED - but traffic từ the PHONE sẽ be tagged với một VLAN ID ![image](https://github.com/psaumur/CCNA/assets/106411237/12a1bfa5-036a-4eb6-b165-23fc8209a1f8) ![image](https://github.com/psaumur/CCNA/assets/106411237/b7c5b7e6-fa79-4405-b72f-b609ab56f216) ![image](https://github.com/psaumur/CCNA/assets/106411237/fc26e9dd-e19e-43cc-9f2a-4022b47f98b4) --- POWER OVER Ethernet (PoE) - PoE allows Power Sourcing Equipment (PSE) to provide POWER đến Powered Devices (PD) over một Ethernet Cáp - Typically, the PSE là một Switch và the PDs là IP PHONES, IP CAMERAS, Không dây Truy cập POINTS, etc. - The PSE receives AC POWER từ the outlet, converts it đến DC POWER, and supplies that DC POWER đến the PDs ![image](https://github.com/psaumur/CCNA/assets/106411237/4229e398-a50e-487c-adf3-66b235ea9189) - TOO much electrical current có thể damage electrical DEVICES - PoE has một process đến determine if một CONNECTED Thiết bị needs power và how much it needs. - When một Thiết bị là connected đến một PoE-Enabled Cổng, the PSE (Switch) sends LOW POWER SIGNALS, monitors the response, and determines how much power the PD needs - If the Thiết bị needs POWER, the PSE supplies the POWER đến allow the PD đến boot - The PSE continues đến monitor the PD và SUPPLY the required amount của POWER (but not too much!) - *POWER Kiểm soát* can be configured đến prevent một PD từ taking TOO much POWER - 'power inline police' configures power Kiểm soát với the Default settings: Vô hiệu hóa the Cổng và send một SYSLOG message if một PD draws too much power - Equivalent to 'power inline police action err-Vô hiệu hóa' - The Giao diện sẽ be put trong an ‘error-disabled’ state và có thể be re-enabled with 'shutdown' followed by 'no shutdown' ![image](https://github.com/psaumur/CCNA/assets/106411237/59914c0d-2c0e-4952-a4af-1f7ada02002d) - 'power inline police action log' does NOT shut down the Giao diện if the PD draws too much power. It sẽ restart the Giao diện và send một SYSLOG message ![image](https://github.com/psaumur/CCNA/assets/106411237/9717fb1e-9129-41f9-90bb-613c2bdee460) ![image](https://github.com/psaumur/CCNA/assets/106411237/8fe2eb15-49be-4f63-9f6f-79c0d5fe052f) --- INTRO đến Chất lượng dịch vụ (QoS) - VOICE traffic và DATA traffic used đến use entirely separate NETWORKS - VOICE TRAFFIC used the PSTN - DATA TRAFFIC used the IP Mạng (Doanh nghiệp WAN, Internet, etc) - QoS wasn’t necessary as the different kinds của TRAFFIC didn’t compete cho BANDWIDTH ![image](https://github.com/psaumur/CCNA/assets/106411237/8a21a767-5a93-42bd-a8d4-52453f8a7341) - Modern NETWORKS là typically *converged networks* in which IP PHONES, VIDEO TRAFFIC, REGULAR TRAFFIC, etc. all share the same IP Mạng - This enables COST SAVINGS as well as more ADVANCED FEATURES cho VOICE và VIDEO TRAFFIC (Example : Collaboration Software like Cisco WebEx, MS Teams, etc) - HOWEVER, the different kinds của TRAFFIC now have đến compete cho BANDWIDTH - **QoS** is một set của TOOLS used bởi Mạng DEVICES đến apply different TREATMENT đến different PACKETS ![image](https://github.com/psaumur/CCNA/assets/106411237/8909efdb-bbbd-4f50-b412-7abe12a3bcef) Chất lượng dịch vụ (QoS) - QoS là used đến manage the following characteristics của Mạng TRAFFIC - BANDWIDTH - Overall CAPACITY của the LINK (measured in *bits per second*) - QoS TOOLS allow you đến RESERVE một certain amount của một link’s BANDWIDTH cho specific kinds của traffic - DELAY - One-Way Delay = Time it takes traffic đến go từ SOURCE đến DESTINATION - Two-Way Delay = Time it takes traffic đến go từ SOURCE đến DESTINATION và return ![image](https://github.com/psaumur/CCNA/assets/106411237/29ed6306-a6aa-46ba-af2f-5ebcd383d1d7) - JITTER - The variation trong ONE-WAY DELAY between PACKETS SENT bởi the same APPLICATION - IP PHONES have a ‘jitter buffer’ to provide một FIXED DELAY đến audio PACKETS - LOSS - The % of PACKETS sent that DO NOT reach their DESTINATION - Can be caused bởi FAULTY CABLES - Can also be caused when một Thiết bị’S Gói tin QUEUES get full và the Thiết bị starts discarding PACKETS - The FOLLOWING STANDARDS là recommended cho ACCEPTABLE INTERACTIVE AUDIO quality: - ONE-WAY DELAY : 150 milliseconds hoặc less - JITTER : 30 milliseconds hoặc less - LOSS : 1% or less - If these STANDARDS là not met, there có thể be một noticeable reduction trong the QUALITY của the phone call QoS QUEUING - If một Mạng Thiết bị receives messages FASTER than it có thể FORWARD them out của the appropriate Giao diện, the MESSAGES là placed trong the QUEUE - By Default, the QUEUED MESSAGES sẽ be FORWARDED trong một FIRST trong FIRST OUT (FIFO) manner - Message sẽ be SENT trong the ORDER they là RECEIVED - If the QUEUE là FULL, new PACKETS sẽ be DROPPED - The là called *tail drop* ![image](https://github.com/psaumur/CCNA/assets/106411237/15de2fcd-5711-4014-8185-9975b2ce8a0d) - TAIL DROP là harmful because it có thể lead đến TCP GLOBAL SYNCHRONIZATION ![image](https://github.com/psaumur/CCNA/assets/106411237/1d22afa7-91aa-4e86-9c5f-ad9506dcb44c) - When the QUEUE fills UP và TAIL DROP occurs, ALL TCP HOSTS sending traffic sẽ SLOW DOWN the rate tại which they SEND TRAFFIC - They sẽ ALL then INCREASE the RATE tại which they send TRAFFIC, which rapidly leads đến MORE CONGESTION, dropped PACKETS, and the process REPEATS… ![image](https://github.com/psaumur/CCNA/assets/106411237/b75c2cac-043c-4df6-a1d6-f26d9110630a) - A SOLUTION đến prevent TAIL DROP và TCP GLOBAL SYNCHRONIZATION là RANDOM EARLY DETECTION (RED) - When the amount của TRAFFIC trong the QUEUE reaches một certain THRESHOLD, the Thiết bị sẽ start RANDOMLY dropping PACKETS từ select TCP FLOWS - Those TCP FLOWS that dropped PACKETS sẽ reduce the RATE tại which TRAFFIC là sent, but you sẽ avoid TCP GLOBAL SYNCHRONIZATION, in which ALL TCP FLOWS reduce và then increase the rate của transmission tại the same time, in waves. - In STANDARD RED, all kinds của TRAFFIC là treated the SAME - WEIGHTED RANDOM EARLY DETECTION (WRED) - an improved version của RED, allows you Kiểm soát which PACKETS là dropped depending trên the TRAFFIC CLASS ** TRAFFIC CLASSES và details about how QoS works sẽ be covered trong DAY 47 ** 